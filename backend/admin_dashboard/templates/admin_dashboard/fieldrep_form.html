{% extends "base.html" %}
{% block title %}
  {% if view.object %}Edit{% else %}Add{% endif %} Field Rep Â· Inditech
{% endblock %}

{% block content %}
<h2 class="mb-4">
  {% if view.object %}Edit{% else %}Add{% endif %} Field Rep
</h2>

<form method="post" class="needs-validation" novalidate>
  {% csrf_token %}
  <div class="mb-3">
      <label class="form-label" for="campaignSelect">Assign to Campaign (optional)</label>
      <select class="form-select" id="campaignSelect" name="campaign">
        <option value="" {% if not campaign_param %}selected{% endif %}>Select campaign</option>

        {% for c in campaigns %}
            <option value="{{ c.brand_campaign_id|stringformat:'s' }}"
                    {% if campaign_param|stringformat:"s" == c.brand_campaign_id|stringformat:"s" %}selected{% endif %}>
              {{ c.name }} ({{ c.brand_campaign_id }})
            </option>

        {% endfor %}
      </select>
    </div>

  {{ form.non_field_errors }}

  {% for field in form %}
    <div class="mb-3">
      <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
      {{ field }}
      {% if field.errors %}
        <div class="text-danger">{{ field.errors }}</div>
      {% endif %}
    </div>
  {% endfor %}

  <button class="btn btn-success">
    {% if view.object %}Update{% else %}Add{% endif %}
  </button>
  <a href="{% url 'admin_dashboard:fieldrep_list' %}{% if campaign_param %}?campaign={{ campaign_param }}{% endif %}" class="btn btn-secondary ms-2">Back</a>
</form>
{% endblock %}
